(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{5853:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,2619,23)),Promise.resolve().then(a.bind(a,6057))},6057:(e,s,a)=>{"use strict";a.d(s,{ResultsClient:()=>A});var t=a(5155),l=a(2115),r=a(63),c=a(2619),n=a.n(c),i=a(7187),d=a(5225),x=a(2251),m=a(6615),o=a(5418),h=a(5894),j=a(669),p=a(6374),u=a(9007),N=a(4269);let f=p.bL,w=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(p.q7,{ref:s,className:(0,N.cn)("border-b",a),...l})});w.displayName="AccordionItem";let v=l.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsx)(p.Y9,{className:"flex",children:(0,t.jsxs)(p.l9,{ref:s,className:(0,N.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...r,children:[l,(0,t.jsx)(u.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});v.displayName=p.l9.displayName;let g=l.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsx)(p.UC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,t.jsx)("div",{className:(0,N.cn)("pb-4 pt-0",a),children:l})})});g.displayName=p.UC.displayName;var b=a(1647),y=a(3998),E=a(6948),k=a(8332),R=a(243);function S(){return(0,t.jsxs)("div",{className:"container mx-auto max-w-5xl py-12 px-4 md:px-6",children:[(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[(0,t.jsx)(R.E,{className:"h-12 w-3/4 mx-auto"}),(0,t.jsx)(R.E,{className:"h-6 w-1/2 mx-auto"})]}),(0,t.jsxs)("div",{className:"mt-12 grid gap-8 md:grid-cols-3",children:[(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(R.E,{className:"h-6 w-24"})}),(0,t.jsx)(E.Wu,{children:(0,t.jsx)(R.E,{className:"h-10 w-16"})})]}),(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(R.E,{className:"h-6 w-32"})}),(0,t.jsx)(E.Wu,{children:(0,t.jsx)(R.E,{className:"h-10 w-20"})})]}),(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(R.E,{className:"h-6 w-28"})}),(0,t.jsx)(E.Wu,{children:(0,t.jsx)(R.E,{className:"h-10 w-24"})})]})]}),(0,t.jsxs)("div",{className:"mt-12 space-y-8",children:[(0,t.jsx)(R.E,{className:"h-10 w-64"}),(0,t.jsx)(E.Zp,{children:(0,t.jsxs)(E.Wu,{className:"p-6 space-y-4",children:[(0,t.jsx)(R.E,{className:"h-4 w-full"}),(0,t.jsx)(R.E,{className:"h-4 w-full"}),(0,t.jsx)(R.E,{className:"h-4 w-3/4"})]})})]}),(0,t.jsxs)("div",{className:"mt-12 space-y-8",children:[(0,t.jsx)(R.E,{className:"h-10 w-48"}),(0,t.jsx)(E.Zp,{children:(0,t.jsx)(E.Wu,{className:"p-6",children:(0,t.jsx)(R.E,{className:"h-32 w-full"})})})]})]})}function A(){let e=(0,r.useRouter)(),s=(0,r.useSearchParams)(),{toast:a}=(0,h.dj)(),[c,p]=(0,l.useTransition)(),[u,A]=(0,l.useState)(0),[Z,I]=(0,l.useState)(0),[W,C]=(0,l.useState)(""),[F,L]=(0,l.useState)(""),[_,T]=(0,l.useState)([]),[q,B]=(0,l.useState)(""),[D,O]=(0,l.useState)(null),[P,Y]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{(()=>{try{let t=localStorage.getItem("interviewHistory"),l=s.get("score"),r=s.get("maxScore"),c=s.get("topic"),n=s.get("difficulty");if(!t||!l||!c||!n||!r){a({title:"Results not found",description:"No interview data available. Redirecting home.",variant:"destructive"}),e.push("/");return}let i=JSON.parse(t);if(T(i),A(parseInt(l,10)),I(parseInt(r,10)),C(c),L(n),i.length>0){let e=i.reduce((e,s)=>{let a=s.feedback.estimatedLevel;return e[a]=(e[a]||0)+1,e},{}),s=Object.keys(e).reduce((s,a)=>e[s]>e[a]?s:a);B(s);let t=i.map(e=>"Q: ".concat(e.question,"\nA: ").concat(e.answer)).join("\n\n"),l=i.map(e=>'Feedback for "'.concat(e.question,'": ').concat(e.feedback.evaluation," Strengths: ").concat(e.feedback.strengths,". Areas for improvement: ").concat(e.feedback.areasForImprovement,".")).join("\n");p(async()=>{let e=await (0,j.Dz)({intervieweeResponse:t,feedback:l,topic:c,difficultyLevel:s});e.success&&e.data?O(e.data):a({title:"Could not get recommendations",description:e.error,variant:"destructive"})})}else B(n)}catch(s){a({title:"Error loading results",description:"Data might be corrupted. Redirecting home.",variant:"destructive"}),e.push("/")}finally{Y(!1)}})()},[e,s,a]),P)?(0,t.jsx)(S,{}):(0,t.jsxs)("div",{className:"container mx-auto max-w-5xl py-12 px-4 md:px-6",children:[(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[(0,t.jsx)("h1",{className:"font-headline text-4xl font-bold tracking-tight text-primary sm:text-5xl",children:"Interview Complete!"}),(0,t.jsx)("p",{className:"text-xl text-muted-foreground",children:"Here's a summary of your performance."})]}),(0,t.jsxs)("div",{className:"mt-12 grid gap-6 md:grid-cols-3",children:[(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(E.ZB,{children:"Final Score"})}),(0,t.jsx)(E.Wu,{children:(0,t.jsxs)("p",{className:"text-5xl font-bold text-primary",children:[u," ",(0,t.jsxs)("span",{className:"text-3xl text-muted-foreground",children:["/ ",Z]})]})})]}),(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(E.ZB,{children:"Estimated Level"})}),(0,t.jsx)(E.Wu,{children:(0,t.jsx)(b.E,{className:"text-2xl",variant:"default",children:q})})]}),(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(E.ZB,{children:"Interview Details"})}),(0,t.jsxs)(E.Wu,{className:"flex flex-col gap-2",children:[(0,t.jsxs)(b.E,{variant:"secondary",children:["Topic: ",W]}),(0,t.jsxs)(b.E,{variant:"secondary",children:["Difficulty: ",F]})]})]})]}),(0,t.jsxs)("div",{className:"mt-16 space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"font-headline text-3xl font-bold flex items-center gap-2 mb-4",children:[(0,t.jsx)(i.A,{}),"Study Recommendations"]}),(0,t.jsx)(E.Zp,{className:"bg-primary/5",children:(0,t.jsx)(E.Wu,{className:"p-6",children:c?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.E,{className:"h-4 w-full"}),(0,t.jsx)(R.E,{className:"h-4 w-full"}),(0,t.jsx)(R.E,{className:"h-4 w-3/4"})]}):D?(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:D.studyRecommendations}):(0,t.jsx)("p",{children:"Could not generate recommendations at this time."})})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"font-headline text-3xl font-bold flex items-center gap-2 mb-4",children:[(0,t.jsx)(d.A,{}),"Full Transcript"]}),(0,t.jsx)(f,{type:"single",collapsible:!0,className:"w-full",children:_.map((e,s)=>(0,t.jsxs)(w,{value:"item-".concat(s),children:[(0,t.jsxs)(v,{className:"text-lg font-semibold",children:["Question ",s+1,": ",(0,t.jsx)("span",{className:"text-left font-normal ml-2",children:e.question})]}),(0,t.jsxs)(g,{className:"space-y-4 pt-4",children:[e.options?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h4",{className:"font-semibold",children:["Your answer: ",(0,t.jsx)("span",{className:"font-normal",children:e.answer})]}),(0,t.jsx)("ul",{className:"space-y-1 text-sm",children:e.options.map((s,a)=>(0,t.jsxs)("li",{className:(0,N.cn)("flex items-center p-2 rounded-md",s===e.correctAnswer?"bg-green-100 dark:bg-green-900/30":"",s===e.answer&&s!==e.correctAnswer?"bg-red-100 dark:bg-red-900/30":""),children:[s===e.correctAnswer?(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2 text-green-600"}):e.answer===s?(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2 text-red-600"}):(0,t.jsx)("div",{className:"h-4 w-4 mr-2"}),(0,t.jsx)("span",{className:(0,N.cn)(s===e.answer&&"font-bold"),children:s})]},a))})]}):(0,t.jsxs)(k.Fc,{children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),(0,t.jsx)(k.XL,{children:"Your Answer"}),(0,t.jsx)(k.TN,{className:"whitespace-pre-wrap",children:e.answer})]}),(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(E.ZB,{className:"text-base",children:"Feedback"})}),(0,t.jsxs)(E.Wu,{className:"space-y-2 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Evaluation:"})," ",e.feedback.evaluation]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Strengths:"})," ",e.feedback.strengths]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Areas for Improvement:"})," ",e.feedback.areasForImprovement]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Level:"})," ",(0,t.jsx)(b.E,{variant:"outline",children:e.feedback.estimatedLevel})]})]})]})]})]},s))})]})]}),(0,t.jsx)("div",{className:"mt-16 text-center",children:(0,t.jsx)(y.$,{asChild:!0,size:"lg",children:(0,t.jsx)(n(),{href:"/",children:"Try Another Interview"})})})]})}}},e=>{e.O(0,[746,256,585,671,441,255,358],()=>e(e.s=5853)),_N_E=e.O()}]);